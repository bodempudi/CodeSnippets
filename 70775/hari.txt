Derived Sales :=
VAR _HasOneMonth = HASONEVALUE(salesdata[MO])

-- Row logic (scoped to current Category–Description–Year)
VAR _Cat  = SELECTEDVALUE(salesdata[Category])
VAR _Desc = SELECTEDVALUE(salesdata[Description])
VAR _Yr   = SELECTEDVALUE(salesdata[YR])

VAR _Target =
    CALCULATE(
        MAX(salesdata[TotalForecast]),
        FILTER(ALL(salesdata),
            salesdata[Category]=_Cat &&
            salesdata[Description]=_Desc &&
            salesdata[YR]=_Yr
        )
    )

VAR _ActualYear =
    CALCULATE(
        SUM(salesdata[Actual]),
        FILTER(ALL(salesdata),
            salesdata[Category]=_Cat &&
            salesdata[Description]=_Desc &&
            salesdata[YR]=_Yr
        )
    )

VAR _WD_Zero_Total =
    CALCULATE(
        SUM(salesdata[MonthWorkingDays]),
        FILTER(ALL(salesdata),
            salesdata[Category]=_Cat &&
            salesdata[Description]=_Desc &&
            salesdata[YR]=_Yr &&
            COALESCE(salesdata[Actual],0)=0
        )
    )

VAR _Leftover = _Target - _ActualYear
VAR _SalesThisMonth = SUM(salesdata[Actual])
VAR _WD_ThisMonth   = MAX(salesdata[MonthWorkingDays])

VAR _RowValue =
    IF(
        _SalesThisMonth > 0,
        _SalesThisMonth,
        DIVIDE(_Leftover * _WD_ThisMonth, _WD_Zero_Total, 0)
    )

RETURN
IF(
    _HasOneMonth,
    -- row level
    _RowValue,
    -- totals: explicitly sum month rows in current filters
    SUMX(
        SUMMARIZE(
            ALLSELECTED(salesdata),
            salesdata[Category],
            salesdata[Description],
            salesdata[YR],
            salesdata[MO]
        ),
        CALCULATE([Derived Sales])   -- evaluates this measure per-month context
    )
)
Here’s a concise, professional email you can copy-paste and send. Edit the bracketed parts as needed.


---

Subject: Approval Request – Access to EDLC Metadata Database

To: [Secretary Name]
Cc: [Division Head Name]; [Your Manager]; [DBA/Security Team Group]

Dear [Secretary Name],

I hope you’re well. Could you please help obtain [Division Head Name]’s approval for my access to the EDLC (Enterprise Data Load Center) Metadata database?

Purpose
I am working on the EDLC implementation and need access to review, validate, and maintain metadata (tables, columns, indexes, load rules, and control statuses) that drive our automated data-load processes. This access will enable timely issue resolution and smoother releases.

Access Requested

Environment: [DEV / UAT / PROD]

Server/Instance: [ServerName\Instance or FQDN]

Database: [DatabaseName] (EDLC metadata repository)

Access Type: [Read-only / Read-write (maintenance)]

Login/ID: [Your AD ID / SQL Login]


Data Sensitivity & Controls

The database contains metadata only (no customer PII or transactional data).

Activities will follow NBK security and change-management policies.

Audit logging is enabled; access will be reviewed periodically.

Access will be revoked upon role change or project completion.


If approved, the DBA/Security team can proceed to grant the above access. Please let me know if any additional details or a formal request form are required; I’ll submit them immediately.

Thank you for your support.

Best regards,
Venkat Bodempudi
[Title/Team], National Bank of Kuwait
[Phone] | [Email] | [Employee ID]


---

If you want, tell me your exact environment, server, and access level, and I’ll fill those in perfectly.

